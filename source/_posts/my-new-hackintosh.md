---
title: 新装的黑苹果
date: 2019-06-26 19:28:00
updated: 2019-06-29 21:09:00
categories: [操作系统, Mac]
tags: [mac]
---

去年年底买了个 NUC8i7HVK，打算把现在用 iMac 27 卖掉，然后装个 Mac 和 Windows 的双系统做开发用，但是 iMac 装了 10.14 之后，发现 APFS 也支持 Fusion Drive 了，感觉还挺好用的。就一直没卖。所以 NUC8i7HVK 上最后只装了一个 Windows 10，没装 Mac 系统。用了半年，发现 27 寸的 iMac 虽然是 5K 屏，但是不够大，还是 NUC8i7HVK 上接的那个飞利浦 43 寸 4K 显示器比较爽。但是 iMac 接在 43 寸显示器上用的话，有两个显示器，而 43 寸的显示器本身已经够大了，两个显示器根本看不过来，所以 iMac 自带的屏幕就有点浪费了，于是再次打算装个黑苹果，把 iMac 卖掉。

于是又买了一块三星 SM961 的 M2. NVMe 硬盘，插到 NUC8i7HVK 中装黑苹果。最后安装倒是安装好了，可是发现显卡驱动不完美，很多地方显示是花屏，感觉效果不如意。所以打算重新自己卖配件，自己组装一台黑苹果，然后把 NUC8i7HVK 和 iMac 全都卖掉。

经过上网搜索各种资料，最后从淘宝买了下面这一堆配件：

|         硬件       |                   型号                  |   价格   |
|--------------------|-----------------------------------------|----------|
|      CPU + 主板    | Intel Core i7-8700 + 微星 B360M 迫击炮  |  2639    |
|         显卡       | 蓝宝石 RX580 8G 2304SP 白金版 1366MHz   |   728    |
|         硬盘       | 三星 SM961 512G M2 NVMe                 |   549    |
|         硬盘2      | 东芝 TR200 960G SSD SATA                |   759.8  |
|         内存       | 英睿达镁光 DDR4 2666Mhz 16G*2 (共 32G)  |   958    |
|     无线 + 蓝牙    | BCM943602CS 双频 BT4.1 无线网卡 PCI-E   |   184.24 |
|   摄像头 + 麦克风  | 蓝色妖姬 480p USB2 摄像头，内置麦克风   |    38.71 |
| 机箱 + 电源 + 风扇 | 酷冷至尊Q300L机箱，MWE500电源，风扇 * 3 |   620    |
|    USB3.1 Type-C   | Type-E 转为 Type-C 的 USB 3.1 的挡板线  |    32    |

算下来总价格差不多是：6509 元。

这个价格比最新的 Mac mini 最低配（6331 元）只贵了不到 180 元。但是在配置上那已经是天差地别了。

下面是跟 Mac mini 最低配的对比：

|         Mac mini          |                 黑苹果                  |                       对比                   |
|---------------------------|-----------------------------------------|----------------------------------------------|
|    Intel Core i3-8100     |           Intel Core i7-8700            | Mac mini 要换这个 i7 CPU 需要加 2334 元      |
|     8GB 2666MHz DDR4      |            32G 2666Mhz DDR4             | Mac mini 要换 32G 内存需要加 4404 元         |
|        Intel 核显         |           Intel 核显 + RX580            | Mac mini 没有独显，加钱也没有                |
|      128GB 固态硬盘       |          512G + 960G 固态硬盘           | Mac mini 就算换 1T 固态硬盘也需要加 5872 元  |
| USB 3.0 * 2 + USB 3.1 * 4 | USB 2.0 * 4 + USB 3.0 * 2 + USB 3.1 * 3 | Mac mini Type-C 接口虽多，但 Type-A 的不够用 |

单纯对比这几项，我们就会发现，即使 Mac mini 再加上 12610 元，把配置升级了，还是比这台黑苹果的配置差劲，因为这还没算上显卡。

也就是说，一台升级了配置之后，仍然比黑苹果还差劲的 Mac mini 的价钱已经相当于三台黑苹果了。

所以，上面黑苹果对配置跟 Mac mini 比起来可以算是性价比极高了。

当然我还有一些配件没有算上，比如我还有一块三星 970 Pro 1T 的 M2 NVMe 硬盘，是 NUC8i7HVK 上的，现在的价格差不多是 2779 元，原来的价格肯定比这个高。键盘鼠标是以前买的罗技 K780 + M590，入手价是 534 元。显示器是去年跟 NUC8i7HVK 一起买的飞利浦 43 寸的 4K 显示器，入手价是 2977 元。这些加一起也有 6290 元。

要是都算在一起的话，总价格差不多有 12800 元吧。看上去有点贵了，可是跟 iMac 对比一下：

|      iMac 27        |        黑苹果        |                       对比                  |
|---------------------|----------------------|---------------------------------------------|
| Intel Core i5-9600K |  Intel Core i7-8700  | i7-8700 不论性能还是价格都更高一些          |
|  32GB 2666MHz DDR4  |   32G 2666Mhz DDR4   | 这俩可以配置一样                            |
| Radeon Pro 580X 8G  |   蓝宝石 RX580 8G    | iMac 这个显卡名字很牛逼，其实跟 RX580 一样  |
|       2T SSD        | 512G + 960G +1T SSD  | 黑苹果的硬盘容量更大一些                    |
|    苹果键盘鼠标     |  罗技 K780 + M590    | 苹果键盘说实话，手感和耐用程度比罗技差远了  |
|   27寸 5K 显示器    | 43寸 4K 飞利浦显示器 | 各有各的好，我更喜欢大的                    |

按照上面 iMac 27 这个配置的话，官网价格是 30206 元，差不多是黑苹果两倍半的价格。所以，这台黑苹果的性价比仍然是极高的。更何况，我这几样多出来的是之前的配件，并不需要重新购买，跟新买一台 iMac 27 来比的话，就更省钱了。

这个配置安装黑苹果也是相当简单，硬件安装就不详细说了，按照说明书插起来就行了，自己动手大不了多花点时间，并不是很难。

这里说几点需要注意的地方，显卡插在第一个 PCI-E x16 插槽上，显卡会占两个 PCI-E 挡板的位置，所以紧挨着第一个 PCI-E x16 的那个 PCI-E x1 插槽被挡起来了，用不了。BCM943602CS 无线网卡插在第三个挡板位置对应的 PCI-E x1 插槽里面，跟显卡紧挨着。因为第四个 PCI-E 插槽不能用，它跟第二个 M2 插槽冲突，我两个 M2 插槽都要插硬盘，所以，第四个 PCI-E 插槽只能空着，不能用来插无线网卡，我最开始就把无线网卡插在那里了，最后发现不能用。但是这个插槽空着，挡板位置还是不能浪费的，正好主板上还有一个 USB 3.1 的 Type-E 的接口，我专门买了一个 Type-E 转为 Type-C 的 USB 3.1 的挡板线，把它引出来，正好可以把挡板插在第四个 PCI-E 插槽的位置上，这样四个挡板的位置就全利用起来啦，后面板上还多了一个 Type-C 接口，还可以防止空着进灰了，一举两得。

主板上有一个 CPU 风扇接口，直接接 CPU 的风扇，我的 CPU 是 i7-7800，非超频版本，功耗只有 65w，用盒装自带的风扇完全镇的住它，不需要单独买个 CPU 散热器了，更不需要上什么水冷。

机箱后面自带一个风扇，接在 SysFan3 上面，离得近。顶部的风扇接在 SysFan1 上，前面的风扇接在 SysFan2 上。风扇多的可以分组串联，比如我前面装了2个风扇，是串联在一起接在 SysFan2 上的。

这样做，之后可以在系统的 BIOS 里面对每组风扇单独控制。

我买的电源是直出的，跟全模组的相比，便宜一半，缺点就是用不着的线一大堆，用不着的线我塞到机箱背面捆起来，这样就不会影响美观和散热了。

关于内存条，我只买了 2 条 16G 的，日后如果需要，还可以再加 2 条扩充到 64G。但是如果只插两条内存的话，应该插在 2、4 位置上，不然开机之后会有提示告诉你，你所插的内存位置没有优化。

接下来是安装系统。

我要安装的是双系统，安装之前先进 BIOS 进行以下设置：

首先用 F6 载入默认优化的配置。接下来调节风扇转速，把智能调节都打开，然后按照自己的喜好来设置每一档的风扇转速。如果不设置的话，机箱的风扇声音会全速运行，非常吵，但是温度却不一定很低。设置好了，会很静音，温度也不高。

接下来是开启双显卡支持，核显加速。打开高级设置，找到调整整合式显卡的设置（Integrated Graphics Configuration），第一项设置为 PEG，然后把下面一项开启多显示器输出功能打开，这时中间会出现一项集成显卡分配的内存容量，保持默认值 64M 就可以了。这样设置之后，就可以打开双显卡支持，核显加速了。如果不这么设置，不管是 Windows 还是黑苹果都会有问题。

如果你希望可以用USB鼠标或键盘唤醒电脑的话，可以在唤醒事件设置中，把由 USB 设备唤醒一项打开。

剩下其他的设置，就都不要动了。都保持默认值就好。否则，安装黑苹果时可能会遇到各种奇怪的问题。

先安装 Windows 10，安装好之后，从[微星官网](https://cn.msi.com/Motherboard/support/B360M-MORTAR)下载 BIOS 和驱动安装升级。

然后从[三星官网](https://www.samsung.com/semiconductor/minisite/ssd/download/tools/)下载硬盘驱动，从[东芝官网](https://ssd.toshiba-memory.com/cn-apac/download/)下载硬盘固件管理程序，之后安装升级就行了。

独显驱动从 AMD 官网下载，无线网卡和蓝牙驱动是跟卖家要的。

一切都没问题的话，就可以安装黑苹果了。

Mac 安装盘镜像从[果黑小兵的部落阁](https://blog.daliansky.net/)下载。然后下载对应的 [EFI](https://github.com/SuperNG6/MSI-B360-10.14.5-EFI/releases)。安装盘制作好之后，用下载的 EFI 替换安装盘的 EFI 分区中的 EFI 目录中的内容。然后下载 Clover Configurator，按照[这篇文章](https://sleele.com/2019/03/21/smbios/)中所写内容生成 SMBIOS 信息，按照我的黑苹果硬件配置来说，选择 iMac19,2 就可以了，注意一定要更新 Clover Configurator 到最新版，不然没有这个选项可选。更新完了记得保存，不然就白改了。

接下来，把安装 U 盘插到机箱，在 BIOS 里把启动改成 U 盘优先，然后剩下的基本上就是下一步下一步，跟在白苹果上安装基本上没有什么区别。安装过程中会重启几次，重启之后也是先通过 U 盘引导，进入 Clover 界面，选择已安装的苹果系统盘启动，两次之后就进入安装完成界面了，然后一路设置完成，就可以使用了。

接下来，用 Clover Configurator 把安装盘上的 EFI 目录复制的安装好的系统的 EFI 盘的 EFI 目录中。之后就不需要 U 盘，直接可以通过硬盘启动了。

接下来对系统的优化可以参考：https://github.com/SuperNG6/MSI-B360-10.14.5-EFI/wiki ，这里就不啰嗦了。

