<!DOCTYPE html> <html> <head><meta name="generator" content="Hexo 3.9.0"> <script>var _hmt=_hmt||[]</script> <script async src="//hm.baidu.com/hm.js?3d88a42f36d311b6e2c830ea185ed398"></script> <script>!function(){var t=document.createElement("script");t.setAttribute("async",!0);var e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script> <meta charset="utf-8"> <link rel="canonical" href="https://coolcode.org"> <title>将阿里云服务器升级到 debian 9 的全过程记录</title> <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"> <meta name="theme-color" content="#3F51B5"> <meta name="keywords" content="debian"> <meta name="description" content="今天装了一台阿里云上的服务器，打算安装 nginx、php 和 mysql。系统一开始是 debian 8，所以需要先升级一下。 首先进入 /etc/apt/sources.list.d 目录，里面有个阿里云安装源的配置文件，把它内容删除，然后改成： deb http://mirrors.aliyun.com/debian stretch main contrib non-freedeb-src"> <meta name="keywords" content="debian"> <meta property="og:type" content="article"> <meta property="og:title" content="将阿里云服务器升级到 debian 9 的全过程记录"> <meta property="og:url" content="https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/index.html"> <meta property="og:site_name" content="CoolCode"> <meta property="og:description" content="今天装了一台阿里云上的服务器，打算安装 nginx、php 和 mysql。系统一开始是 debian 8，所以需要先升级一下。 首先进入 /etc/apt/sources.list.d 目录，里面有个阿里云安装源的配置文件，把它内容删除，然后改成： deb http://mirrors.aliyun.com/debian stretch main contrib non-freedeb-src"> <meta property="og:locale" content="zh-CN"> <meta property="og:image" content="https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/neofetch.png"> <meta property="og:updated_time" content="2018-04-03T19:04:00.000Z"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="将阿里云服务器升级到 debian 9 的全过程记录"> <meta name="twitter:description" content="今天装了一台阿里云上的服务器，打算安装 nginx、php 和 mysql。系统一开始是 debian 8，所以需要先升级一下。 首先进入 /etc/apt/sources.list.d 目录，里面有个阿里云安装源的配置文件，把它内容删除，然后改成： deb http://mirrors.aliyun.com/debian stretch main contrib non-freedeb-src"> <meta name="twitter:image" content="https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/neofetch.png"> <link rel="alternate" type="application/atom+xml" title="CoolCode" href="../../../../atom.xml"> <link rel="shortcut icon" href="../../../../favicon.ico"> <link rel="stylesheet" href="../../../../css/style.css?v=1.7.2"> <script src="../../../../js/echarts.common.min.js?v=1.7.2"></script> <script>window.lazyScripts=[]</script> <link rel="manifest" href="/manifest.json"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-precomposed-144x144.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/apple-touch-icon-precomposed-120x120.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/apple-touch-icon-precomposed-72x72.png"> <link rel="apple-touch-icon-precomposed" href="/img/apple-touch-icon-precomposed-57x57.png"> </head> <body> <div id="loading" class="active"></div> <aside id="menu"> <div class="inner flex-row-vertical"> <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off"> <i class="icon icon-lg icon-close"></i> </a> <div class="brand-wrap" style="background-image:url(../../../../img/brand.jpg)"> <div class="brand"> <a href="../../../../index.html" class="avatar waves-effect waves-circle waves-light"> <img src="../../../../img/avatar.jpg"> </a> <hgroup class="introduce"> <h5 class="nickname">小马哥</h5> <a href="mailto:andot@qq.com" title="andot@qq.com" class="mail">andot@qq.com</a> </hgroup> <ul class="menu-link"> <li> <a href="https://github.com/andot" target="_blank"> <i class="icon icon-lg icon-github"></i> </a> </li> <li> <a href="https://sighttp.qq.com/authd?IDKEY=0f7b6690eff38f1a1bc274af3639750f34b370fb0f86105f" target="_blank"> <i class="icon icon-lg icon-qq"></i> </a> </li> </ul> </div> </div> <div class="scroll-wrap flex-col"> <ul class="nav"> <li class="waves-block waves-effect"> <a href="../../../../index.html"> <i class="icon icon-lg icon-home"></i> 主页 </a> </li> <li class="waves-block waves-effect"> <a href="../../../../archives"> <i class="icon icon-lg icon-archives"></i> 归档 </a> </li> <li class="waves-block waves-effect"> <a href="../../../../tags"> <i class="icon icon-lg icon-tags"></i> 标签 </a> </li> <li class="waves-block waves-effect"> <a href="../../../../categories"> <i class="icon icon-lg icon-th-list"></i> 分类 </a> </li> <li class="waves-block waves-effect"> <a href="../../../../about"> <i class="icon icon-lg icon-id-card"></i> 关于 </a> </li> </ul> </div> </div> </aside> <main id="main"> <header class="top-header" id="header"> <div class="flex-row"> <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle"> <i class="icon icon-lg icon-navicon"></i> </a> <div class="flex-col header-title ellipsis">将阿里云服务器升级到 debian 9 的全过程记录</div> <div class="search-wrap" id="search-wrap"> <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back"> <i class="icon icon-lg icon-chevron-left"></i> </a> <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字"> <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search"> <i class="icon icon-lg icon-search"></i> </a> </div> <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare"> <i class="icon icon-lg icon-share-alt"></i> </a> </div> </header> <header class="content-header post-header"> <div class="container fade-scale"> <h1 class="title">将阿里云服务器升级到 debian 9 的全过程记录</h1> <h5 class="subtitle"> <time datetime="2018-04-03T14:33:00.000Z" itemprop="datePublished" class="page-time"> 2018年04月03日 </time> <ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="../../../../categories/操作系统/">操作系统</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="../../../../categories/操作系统/Debian/">Debian</a></li></ul></li></ul> </h5> </div> </header> <div class="container body-wrap"> <aside class="post-widget"> <nav class="post-toc-wrap post-toc-shrink" id="post-toc"> <h4>目录</h4> <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#装逼是必须的"><span class="post-toc-number">1.</span> <span class="post-toc-text">装逼是必须的</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#vim-是不可少的"><span class="post-toc-number">2.</span> <span class="post-toc-text">vim 是不可少的</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#命令行不爽是不行的"><span class="post-toc-number">3.</span> <span class="post-toc-text">命令行不爽是不行的</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#开始干正事了"><span class="post-toc-number">4.</span> <span class="post-toc-text">开始干正事了</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#系统优化"><span class="post-toc-number">5.</span> <span class="post-toc-text">系统优化</span></a></li></ol> </nav> </aside> <article id="post-upgrade-to-debian9-on-aliyun" class="post-article article-type-post fade" itemprop="blogPost"> <div class="post-card"> <h1 class="post-card-title">将阿里云服务器升级到 debian 9 的全过程记录</h1> <div class="post-meta"> <time class="post-time" title="2018年04月03日 22:33:00" datetime="2018-04-03T14:33:00.000Z" itemprop="datePublished">2018年04月03日</time> <ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="../../../../categories/操作系统/">操作系统</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="../../../../categories/操作系统/Debian/">Debian</a></li></ul></li></ul> <span id="busuanzi_container_page_pv" title="文章总阅读量" style="display:none"> <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span> </span> </div> <div class="post-content" id="post-content" itemprop="postContent"> <p>今天装了一台阿里云上的服务器，打算安装 nginx、php 和 mysql。系统一开始是 debian 8，所以需要先升级一下。</p> <p>首先进入 <code>/etc/apt/sources.list.d</code> 目录，里面有个阿里云安装源的配置文件，把它内容删除，然后改成：</p> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">deb http://mirrors.aliyun.com/debian stretch main contrib non-free</span><br><span class="line">deb-src http://mirrors.aliyun.com/debian stretch main contrib non-free</span><br><span class="line">deb http://mirrors.aliyun.com/debian stretch-updates main contrib non-free</span><br><span class="line">deb-src http://mirrors.aliyun.com/debian stretch-updates main contrib non-free</span><br><span class="line">deb http://mirrors.aliyun.com/debian stretch-backports main non-free contrib</span><br><span class="line">deb-src http://mirrors.aliyun.com/debian stretch-backports main non-free contrib</span><br><span class="line">deb http://mirrors.aliyun.com/debian-security stretch/updates main contrib non-free</span><br><span class="line">deb-src http://mirrors.aliyun.com/debian-security stretch/updates main contrib non-free</span><br></pre></td></tr></table></figure> <p>接下来执行：</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt dist-upgrade</span><br></pre></td></tr></table></figure> <p>然后确认一下，就是漫长的等待了。下载完所有的安装包之后，会有一个升级列表说明，看不看无所谓了，直接输入 <kbd>q</kbd> 就可以退出继续了。后面会遇到几处确认，因为是新装的系统，所以没什么顾及，都选 <kbd>Y</kbd> 就可以了。</p> <p>安装完成后，再执行：</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo apt autoremove --purge</span><br></pre></td></tr></table></figure> <p>把没有用的包清理掉就可以了。</p> <a id="more"></a> <h1 id="装逼是必须的"><a href="#装逼是必须的" class="headerlink" title="装逼是必须的"></a>装逼是必须的</h1><p>接下来，安装装逼工具 neofetch。</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo apt install neofetch</span><br></pre></td></tr></table></figure> <p>安装之后执行一下 <code>neofetch</code> 就可以看到如下装逼画面了：</p> <figure class="image-bubble"> <div class="img-lightbox"> <div class="overlay"></div> <img src="/2018/04/03/upgrade-to-debian9-on-aliyun/neofetch.png" alt="neofetch"> </div> <div class="image-caption">neofetch</div> </figure> <h1 id="vim-是不可少的"><a href="#vim-是不可少的" class="headerlink" title="vim 是不可少的"></a>vim 是不可少的</h1><p>接下来安装 <code>vim</code>，不然编辑个配置文件都麻烦。执行下面的命令：</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo apt install vim-nox vim-addon-manager vim-syntastic vim-youcompleteme vim-fugitive</span><br><span class="line">wget https://mirrors.aliyun.com/debian/pool/main/v/vim-airline-themes/vim-airline-themes_0%2bgit.20170710.5d75d76-1_all.deb</span><br><span class="line">wget https://mirrors.aliyun.com/debian/pool/main/v/vim-airline/vim-airline_0.9-1_all.deb</span><br><span class="line">sudo dpkg -i vim-airline-themes_0+git.20170710.5d75d76-1_all.deb vim-airline_0.9-1_all.deb</span><br><span class="line">vim-addons install youcompleteme</span><br><span class="line">vim-addons</span><br></pre></td></tr></table></figure> <p>上面装的是 <code>nox</code> 版本（就是没有 X，即非图形界面的版本）的 <code>vim</code>，这个版本跟普通的 <code>vim</code> 包比，多了 <code>python</code> 插件的支持，不然的话，很多插件没法用。</p> <p>另外因为 <code>airline</code> 目前只在 <code>sid</code> 里面有，在 <code>stretch</code> 里面没有，所以需要单独下载。不过还好这两个包 <code>vim-airline</code> 和 <code>vim-airline-themes</code> 没有什么依赖，直接从 <code>sid</code> 仓库里使用 <code>wget</code> 下载下来，用 <code>dpkg</code> 安装就可以了。</p> <p>执行完上面的命令之后，会看到下面的输出：</p> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Name                     User Status  System Status</span><br><span class="line">airline                     removed       installed</span><br><span class="line">airline-themes              removed       installed</span><br><span class="line">editexisting                removed       removed</span><br><span class="line">fugitive                    removed       installed</span><br><span class="line">justify                     removed       removed</span><br><span class="line">matchit                     removed       removed</span><br><span class="line">syntastic                   removed       installed</span><br><span class="line">systemtap                   removed       removed</span><br><span class="line">youcompleteme               installed     removed</span><br></pre></td></tr></table></figure> <p>说明 <code>airline</code>, <code>fugitive</code>, <code>syntasic</code> 和 <code>youcompleteme</code> 这几个插件装好了。</p> <p>只是装好还不够，还需要配置一下，首先打开 <code>/etc/vim/vimrc</code> 文件。找到：</p> <figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="comment">"syntax on</span></span><br><span class="line"></span><br><span class="line"><span class="comment">"set background=dark</span></span><br></pre></td></tr></table></figure> <p>这两句，然后把它们前面的 <code>&quot;</code> 去掉，保存，然后再用 <code>vim</code> 打开就能看到彩色文字了。</p> <p>接下来，把下面这一段保存到 <code>/etc/vim/vimrc.local</code> 文件中。</p> <figure class="highlight vim"><figcaption><span>vimrc.local</span><a href="/2018/04/03/upgrade-to-debian9-on-aliyun/vimrc.local">下载</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">"Ctrl+C, Ctrl+V, Ctrl+X, Ctrl+A, Ctrl+Y, Ctrl+Z, Ctrl+S 跟 windows 一样</span></span><br><span class="line">runtime! mswin.<span class="keyword">vim</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline_powerline_fonts</span>=<span class="number">1</span></span><br><span class="line"><span class="keyword">set</span> laststatus=<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline</span>#extensions#tabline#enabled=<span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline</span>#extensions#tabline#buffer_nr_show=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:airline</span>#extensions#ycm#enabled=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">autocmd! bufwritepost .vimrc <span class="keyword">source</span> % <span class="comment">"vimrc文件修改之后自动加载。 linux。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> completeopt=longest,<span class="keyword">menu</span> <span class="comment">"自动补全配置,让Vim的补全菜单行为与一般IDE一致</span></span><br><span class="line"><span class="keyword">set</span> cursorcolumn             <span class="comment">"突出显示当前列，可用Ctrl+m切换是否显示</span></span><br><span class="line"><span class="keyword">set</span> cursorline               <span class="comment">"突出显示当前行，可用Ctrl+m切换是否显示</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">history</span>=<span class="number">3000</span>             <span class="comment">"history存储长度</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">nu</span>                       <span class="comment">"显示行数</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">shiftwidth</span>=<span class="number">4</span>             <span class="comment">"换行时行间交错使用4空格</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">cindent</span> <span class="built_in">shiftwidth</span>=<span class="number">4</span>     <span class="comment">"自动缩进4空格</span></span><br><span class="line"><span class="keyword">set</span> tabstop=<span class="number">4</span>                <span class="comment">"让一个tab等于4个空格</span></span><br><span class="line"><span class="keyword">set</span> showmatch                <span class="comment">"显示括号配对情况</span></span><br><span class="line"><span class="keyword">set</span> autoread                 <span class="comment">"当文件在外部被改变时，Vim自动更新载入</span></span><br><span class="line"><span class="keyword">set</span> noswapfile               <span class="comment">"关闭交换文件</span></span><br><span class="line"><span class="keyword">set</span> showmode                 <span class="comment">"开启模式显示</span></span><br><span class="line"><span class="keyword">set</span> cmdheight=<span class="number">1</span>              <span class="comment">"命令部分高度为1</span></span><br><span class="line"><span class="keyword">set</span> shortmess=atI            <span class="comment">"启动的时候不显示那个援助索马里儿童的提示</span></span><br><span class="line"><span class="keyword">set</span> t_ti= t_te=              <span class="comment">"退出vim后，内容显示在终端屏幕</span></span><br><span class="line"><span class="keyword">set</span> novisualbell             <span class="comment">"don't beep</span></span><br><span class="line"><span class="keyword">set</span> noerrorbells             <span class="comment">"don't beep</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> wildmode=lis<span class="variable">t:longest</span></span><br><span class="line"><span class="keyword">set</span> ttyfast</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> wildignore=*.swp,*.bak,*.pyc,*.class</span><br><span class="line"><span class="keyword">set</span> scrolloff=<span class="number">3</span>              <span class="comment">"至少有3行在光标所在行上下</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> selection=old</span><br><span class="line"><span class="keyword">set</span> selectmode=mouse,key</span><br><span class="line"><span class="keyword">set</span> viminfo^=%               <span class="comment">"Remember info about open buffers on close</span></span><br><span class="line"><span class="keyword">set</span> viminfo+=!               <span class="comment">"保存全局变量</span></span><br><span class="line"><span class="keyword">set</span> magic                    <span class="comment">"正则表达式匹配形式</span></span><br><span class="line"></span><br><span class="line"><span class="string">"autocmd InsertEnter * se cul "</span>用浅色高亮当前行</span><br><span class="line"><span class="keyword">set</span> ruler                    <span class="comment">"显示标尺</span></span><br><span class="line"><span class="keyword">set</span> showcmd                  <span class="comment">"输入的命令显示出来，看的清楚些</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">"设置标记一列的背景颜色和数字一行颜色一致</span></span><br><span class="line">hi! link SignColumn   LineNr</span><br><span class="line">hi! link ShowMarksHLl DiffAdd</span><br><span class="line">hi! link ShowMarksHLu DiffChange</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span> hlsearch                 <span class="comment">"高亮显示结果</span></span><br><span class="line"><span class="keyword">set</span> incsearch                <span class="comment">"在输入要搜索的文字时，vim会实时匹配</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span></span><br><span class="line"><span class="comment">" F1 - F4 设置</span></span><br><span class="line"><span class="comment">" F1 废弃这个键,防止调出系统帮助</span></span><br><span class="line"><span class="comment">" F2 行号开关，用于鼠标复制代码用</span></span><br><span class="line"><span class="comment">" F3 换行开关</span></span><br><span class="line"><span class="comment">" F4 粘贴模式paste_mode开关,用于有格式的代码粘贴</span></span><br><span class="line"><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span><span class="string">""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">" I can type :help on my own, thanks.  Protect your fat fingers from the evils of &lt;F1&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;F1&gt;</span> <span class="symbol">&lt;Esc&gt;</span><span class="comment">"</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;F2&gt;</span> :<span class="keyword">set</span> nonumber! <span class="keyword">number</span>?<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;F3&gt;</span> :<span class="keyword">set</span> wrap! wrap?<span class="symbol">&lt;CR&gt;</span></span><br><span class="line"><span class="keyword">set</span> pastetoggle=<span class="symbol">&lt;F4&gt;</span>             <span class="comment">"when in insert mode, press &lt;F5&gt; to go to</span></span><br><span class="line">                                 <span class="comment">"paste mode, where you can paste mass data</span></span><br><span class="line">                                 <span class="comment">"that won't be autoindented</span></span><br><span class="line"><span class="keyword">au</span> InsertLeave * <span class="keyword">set</span> nopaste</span><br><span class="line"></span><br><span class="line"><span class="comment">" disbale paste mode when leaving insert mode</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">"Treat long lines as break lines (useful when moving around in them)</span></span><br><span class="line"><span class="comment">"se swap之后，同物理行上线直接跳</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="keyword">k</span> gk</span><br><span class="line"><span class="keyword">nnoremap</span> gk <span class="keyword">k</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="keyword">j</span> gj</span><br><span class="line"><span class="keyword">nnoremap</span> gj <span class="keyword">j</span></span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Up&gt;</span> gk</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;Down&gt;</span> gj</span><br><span class="line"></span><br><span class="line"><span class="keyword">colorscheme</span> torte</span><br><span class="line"></span><br><span class="line"><span class="comment">" 多语言语法检查</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_error_symbol</span>=<span class="string">'✗'</span>      <span class="comment">"set error or warning signs</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_warning_symbol</span>=<span class="string">'⚠'</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_check_on_open</span>=<span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_enable_highlighting</span>=<span class="number">0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_python_checkers</span>=[<span class="string">'pyflakes'</span>] <span class="comment">" 使用pyflakes,速度比pylint快</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_javascript_checkers</span> = [<span class="string">'jsl'</span>, <span class="string">'jshint'</span>]</span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_html_checkers</span>=[<span class="string">'tidy'</span>, <span class="string">'jshint'</span>]</span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_cpp_include_dirs</span> = [<span class="string">'/usr/include/'</span>]</span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_cpp_remove_include_errors</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_cpp_check_header</span> = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_cpp_compiler</span> = <span class="string">'clang++'</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_cpp_compiler_options</span> = <span class="string">'-std=c++11 -stdlib=libstdc++'</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:syntastic_enable_balloons</span> = <span class="number">1</span> <span class="comment">"whether to show balloons</span></span><br><span class="line"><span class="keyword">highlight</span> SyntasticErrorSign guifg=white guibg=black</span><br></pre></td></tr></table></figure> <p>最后，在自己的目录下创建一个 .vimrc 文件，哪怕是空的也行。如果没有这个文件，你会发现有些配置不会生效。</p> <p>最后把没用的 <code>vim</code>, <code>vim-tiny</code> 卸载掉就好了。</p> <h1 id="命令行不爽是不行的"><a href="#命令行不爽是不行的" class="headerlink" title="命令行不爽是不行的"></a>命令行不爽是不行的</h1><p>接下来安装几个命令行增强工具：</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo apt-get install powerline htop thefuck</span><br><span class="line">wget https://github.com/jingweno/ccat/releases/download/v1.1.0/linux-amd64-1.1.0.tar.gz</span><br><span class="line">tar zxvfp linux-amd64-1.1.0.tar.gz</span><br><span class="line">sudo cp linux-amd64-1.1.0/ccat /usr/bin/ccat</span><br><span class="line">sudo chmod +x /usr/bin/ccat</span><br></pre></td></tr></table></figure> <p>然后配置一下 <code>.bashrc</code> 文件：</p> <figure class="highlight sh"><figcaption><span>.bashrc</span><a href="/2018/04/03/upgrade-to-debian9-on-aliyun/bashrc">下载</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># ~/.bashrc: executed by bash(1) for non-login shells.</span></span><br><span class="line"><span class="comment"># see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)</span></span><br><span class="line"><span class="comment"># for examples</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If not running interactively, don't do anything</span></span><br><span class="line"><span class="keyword">case</span> $- <span class="keyword">in</span></span><br><span class="line">    *i*) ;;</span><br><span class="line">      *) <span class="built_in">return</span>;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># don't put duplicate lines or lines starting with space in the history.</span></span><br><span class="line"><span class="comment"># See bash(1) for more options</span></span><br><span class="line">HISTCONTROL=ignoreboth</span><br><span class="line"></span><br><span class="line"><span class="comment"># append to the history file, don't overwrite it</span></span><br><span class="line"><span class="built_in">shopt</span> -s histappend</span><br><span class="line"></span><br><span class="line"><span class="comment"># for setting history length see HISTSIZE and HISTFILESIZE in bash(1)</span></span><br><span class="line">HISTSIZE=1000</span><br><span class="line">HISTFILESIZE=2000</span><br><span class="line"></span><br><span class="line"><span class="comment"># check the window size after each command and, if necessary,</span></span><br><span class="line"><span class="comment"># update the values of LINES and COLUMNS.</span></span><br><span class="line"><span class="built_in">shopt</span> -s checkwinsize</span><br><span class="line"></span><br><span class="line"><span class="comment"># If set, the pattern "**" used in a pathname expansion context will</span></span><br><span class="line"><span class="comment"># match all files and zero or more directories and subdirectories.</span></span><br><span class="line"><span class="comment">#shopt -s globstar</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># make less more friendly for non-text input files, see lesspipe(1)</span></span><br><span class="line"><span class="comment">#[ -x /usr/bin/lesspipe ] &amp;&amp; eval "$(SHELL=/bin/sh lesspipe)"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># set variable identifying the chroot you work in (used in the prompt below)</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$&#123;debian_chroot:-&#125;</span>"</span> ] &amp;&amp; [ -r /etc/debian_chroot ]; <span class="keyword">then</span></span><br><span class="line">    debian_chroot=$(cat /etc/debian_chroot)</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># enable color support of ls and also add handy aliases</span></span><br><span class="line"><span class="keyword">if</span> [ -x /usr/bin/dircolors ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">test</span> -r ~/.dircolors &amp;&amp; <span class="built_in">eval</span> <span class="string">"<span class="variable">$(dircolors -b ~/.dircolors)</span>"</span> || <span class="built_in">eval</span> <span class="string">"<span class="variable">$(dircolors -b)</span>"</span></span><br><span class="line">    <span class="built_in">alias</span> ls=<span class="string">'ls --color=auto'</span></span><br><span class="line">    <span class="built_in">alias</span> dir=<span class="string">'dir --color=auto'</span></span><br><span class="line">    <span class="built_in">alias</span> vdir=<span class="string">'vdir --color=auto'</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">alias</span> grep=<span class="string">'grep --color=auto'</span></span><br><span class="line">    <span class="built_in">alias</span> fgrep=<span class="string">'fgrep --color=auto'</span></span><br><span class="line">    <span class="built_in">alias</span> egrep=<span class="string">'egrep --color=auto'</span></span><br><span class="line">	<span class="built_in">alias</span> cat=<span class="string">'ccat --color=always --bg=dark'</span></span><br><span class="line">	<span class="built_in">alias</span> top=<span class="string">'htop'</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># colored GCC warnings and errors</span></span><br><span class="line"><span class="built_in">export</span> GCC_COLORS=<span class="string">'error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># some more ls aliases</span></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">'ls -l'</span></span><br><span class="line"><span class="built_in">alias</span> la=<span class="string">'ls -A'</span></span><br><span class="line"><span class="built_in">alias</span> l=<span class="string">'ls -CF'</span></span><br><span class="line"><span class="built_in">alias</span> cp=<span class="string">'cp -i'</span></span><br><span class="line"><span class="built_in">alias</span> mv=<span class="string">'mv -i'</span></span><br><span class="line"><span class="built_in">alias</span> rm=<span class="string">'rm -i'</span></span><br><span class="line"><span class="built_in">alias</span> fuck=<span class="string">'TF_CMD=$(TF_ALIAS=fuck PYTHONIOENCODING=utf-8 TF_SHELL_ALIASES=$(alias) thefuck $(fc -ln -1)) &amp;&amp; eval $TF_CMD &amp;&amp; history -s $TF_CMD'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Alias definitions.</span></span><br><span class="line"><span class="comment"># You may want to put all your additions into a separate file like</span></span><br><span class="line"><span class="comment"># ~/.bash_aliases, instead of adding them here directly.</span></span><br><span class="line"><span class="comment"># See /usr/share/doc/bash-doc/examples in the bash-doc package.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -f ~/.bash_aliases ]; <span class="keyword">then</span></span><br><span class="line">    . ~/.bash_aliases</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># enable programmable completion features (you don't need to enable</span></span><br><span class="line"><span class="comment"># this, if it's already enabled in /etc/bash.bashrc and /etc/profile</span></span><br><span class="line"><span class="comment"># sources /etc/bash.bashrc).</span></span><br><span class="line"><span class="keyword">if</span> ! <span class="built_in">shopt</span> -oq posix; <span class="keyword">then</span></span><br><span class="line">  <span class="keyword">if</span> [ -f /usr/share/bash-completion/bash_completion ]; <span class="keyword">then</span></span><br><span class="line">    . /usr/share/bash-completion/bash_completion</span><br><span class="line">  <span class="keyword">elif</span> [ -f /etc/bash_completion ]; <span class="keyword">then</span></span><br><span class="line">    . /etc/bash_completion</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH=/snap/bin:<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_mb=$<span class="string">'\E[01;31m'</span></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_md=$<span class="string">'\E[01;31m'</span></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_me=$<span class="string">'\E[0m'</span></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_se=$<span class="string">'\E[0m'</span></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_so=$<span class="string">'\E[01;44;33m'</span></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_ue=$<span class="string">'\E[0m'</span></span><br><span class="line"><span class="built_in">export</span> LESS_TERMCAP_us=$<span class="string">'\E[01;32m'</span></span><br><span class="line"></span><br><span class="line">stty -ixon <span class="comment"># Ctrl+S 会停止输出，该命令让停止输出失效。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -f `<span class="built_in">which</span> powerline-daemon` ]; <span class="keyword">then</span></span><br><span class="line">  powerline-daemon -q</span><br><span class="line">  POWERLINE_BASH_CONTINUATION=1</span><br><span class="line">  POWERLINE_BASH_SELECT=1</span><br><span class="line">  . /usr/share/powerline/bindings/bash/powerline.sh</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">neofetch</span><br></pre></td></tr></table></figure> <p>然后退出再登录，就可以看到酷炫的命令提示符了。还有彩色的 <code>ls</code>, <code>cat</code>, <code>top</code>, <code>man</code> 等。还可以使用 <code>fuck</code> 命令来纠正输入错误。</p> <h1 id="开始干正事了"><a href="#开始干正事了" class="headerlink" title="开始干正事了"></a>开始干正事了</h1><p>先配置 PHP 最新版本的源。</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo apt -y install apt-transport-https lsb-release ca-certificates</span><br><span class="line">sudo wget -O /etc/apt/trusted.gpg.d/php.gpg https://packages.sury.org/php/apt.gpg</span><br><span class="line">sudo sh -c <span class="string">'echo "deb https://packages.sury.org/php/ $(lsb_release -sc) main" &gt; /etc/apt/sources.list.d/php.list'</span></span><br><span class="line">sudo apt update</span><br></pre></td></tr></table></figure> <p>再接下来配置 mysql 的源。</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">wget https://dev.mysql.com/get/mysql-apt-config_0.8.9-1_all.deb</span><br><span class="line">sudo dpkg -i mysql-apt-config_0.8.9-1_all.deb</span><br><span class="line">sudo apt update</span><br></pre></td></tr></table></figure> <p>再接下来配置 nodejs 最新版本的源。</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">curl -sL https://deb.nodesource.com/setup_9.x | sudo bash -</span><br></pre></td></tr></table></figure> <p>最后一步就是安装它们：</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo apt install -y php7.2 php7.2-fpm php7.2-mysql php7.2-json php7.2-mbstring php7.2-curl php7.2-gd php7.2-bcmath php7.2-opcache php7.2-bz2 php7.2-zip php7.2-dev php-pear nginx mysql-server nodejs</span><br></pre></td></tr></table></figure> <p>接下来安装 <code>phpmyadmin</code>:</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo apt install phpmyadmin</span><br></pre></td></tr></table></figure> <p>安装过程中要选择 Apache 还是 lighttpd，都不选，直接点 OK。然后配置密码就完成了。</p> <p>然后执行：</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo ln -s /usr/share/phpmyadmin/ /var/www/</span><br></pre></td></tr></table></figure> <p>最后配置一下 nginx，再重启 nginx 就可以了。</p> <p>接下来安装 php 的 hprose 扩展：</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo pecl update-channels</span><br><span class="line">sudo pecl install hprose</span><br></pre></td></tr></table></figure> <p>在 <code>/etc/php/7.2/mods-available</code> 下创建文件 <code>hprose.ini</code>：</p> <figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="comment">; configuration for php hprose module</span></span><br><span class="line"><span class="comment">; priority=20</span></span><br><span class="line"><span class="attr">extension</span>=hprose.so</span><br></pre></td></tr></table></figure> <p>然后执行：</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo phpenmod hprose</span><br><span class="line">sudo service php7.2-fpm restart</span><br></pre></td></tr></table></figure> <p><code>hprose</code> 扩展就装好了。</p> <h1 id="系统优化"><a href="#系统优化" class="headerlink" title="系统优化"></a>系统优化</h1><p>阿里云服务器安装之后，没有交换分区，这样一旦内存用光，系统就会进入假死状态。所以必须要创建一个 swap 文件。不过不需要自己手动创建，直接安装 <code>dphys-swapfile</code> 这个包就可以了。</p> <figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">sudo apt install dphys-swapfile</span><br></pre></td></tr></table></figure> <p>安装完成后， 运行 <code>free</code> 就可以看到虚拟内存已经启用了。</p> <p>修改 <code>/etc/sysctl.conf</code>, 在最后加上：</p> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vm.swappiness = 10</span><br><span class="line">net.ipv4.neigh.default.gc_stale_time = 120</span><br><span class="line">net.ipv4.conf.all.rp_filter = 0</span><br><span class="line">net.ipv4.conf.default.rp_filter = 0</span><br><span class="line">net.ipv4.conf.default.arp_announce = 2</span><br><span class="line">net.ipv4.conf.lo.arp_announce = 2</span><br><span class="line">net.ipv4.conf.all.arp_announce = 2</span><br><span class="line">net.ipv4.tcp_max_tw_buckets = 5000</span><br><span class="line">net.ipv4.tcp_syncookies = 1</span><br><span class="line">net.ipv4.tcp_max_syn_backlog = 1024</span><br><span class="line">net.ipv4.tcp_synack_retries = 2</span><br><span class="line">net.ipv6.conf.all.disable_ipv6 = 1</span><br><span class="line">net.ipv6.conf.default.disable_ipv6 = 1</span><br><span class="line">net.ipv6.conf.lo.disable_ipv6 = 1</span><br><span class="line"></span><br><span class="line">net.ipv4.tcp_syn_retries = 1</span><br><span class="line">net.ipv4.tcp_synack_retries = 1</span><br><span class="line">net.ipv4.tcp_keepalive_time = 600</span><br><span class="line">net.ipv4.tcp_keepalive_probes = 3</span><br><span class="line">net.ipv4.tcp_keepalive_intvl =15</span><br><span class="line">net.ipv4.tcp_retries2 = 5</span><br><span class="line">net.ipv4.tcp_fin_timeout = 2</span><br><span class="line">net.ipv4.tcp_max_tw_buckets = 36000</span><br><span class="line">net.ipv4.tcp_tw_recycle = 1</span><br><span class="line">net.ipv4.tcp_tw_reuse = 1</span><br><span class="line">net.ipv4.tcp_max_orphans = 131072</span><br><span class="line">net.ipv4.tcp_syncookies = 1</span><br><span class="line">net.ipv4.tcp_max_syn_backlog = 16384</span><br><span class="line">net.ipv4.tcp_wmem = 8192 131072 16777216</span><br><span class="line">net.ipv4.tcp_rmem = 32768 131072 16777216</span><br><span class="line">net.ipv4.tcp_mem = 786432 1048576 1572864</span><br><span class="line">net.ipv4.ip_local_port_range = 1024 65000</span><br><span class="line"></span><br><span class="line">net.core.somaxconn = 16384</span><br><span class="line">net.core.netdev_max_backlog = 16384</span><br></pre></td></tr></table></figure> </div> <blockquote class="post-copyright"> <div class="content"> <span class="post-time"> 最后更新时间：<time datetime="2018-04-03T19:04:00.000Z" itemprop="dateUpdated">2018年04月04日 03:04:00</time> </span><br> 本文共计 2,660 字，阅读时长预计 13 分钟<br>转载注明出处，原文地址：<a href="" target="_blank" rel="external">https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/</a> </div> <footer> <a href="https://coolcode.org"> <img src="../../../../img/avatar.jpg" alt="小马哥"> 小马哥 </a> </footer> </blockquote> <div class="page-reward"> <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a> </div> <div class="post-footer"> <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../../tags/debian/">debian</a></li></ul> <div class="page-share-wrap"> <div class="page-share" id="pageShare"> <ul class="reset share-icons"> <li> <a class="weibo share-sns" target="_blank" href="https://service.weibo.com/share/share.php?url=https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/&title=《将阿里云服务器升级到 debian 9 的全过程记录》 — CoolCode&pic=https://coolcode.org/img/avatar.jpg" data-title="微博"> <i class="icon icon-weibo"></i> </a> </li> <li> <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信"> <i class="icon icon-weixin"></i> </a> </li> <li> <a class="qq share-sns" target="_blank" href="https://connect.qq.com/widget/shareqq/index.html?url=https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/&title=《将阿里云服务器升级到 debian 9 的全过程记录》 — CoolCode&source=今天装了一台阿里云上的服务器，打算安装 nginx、php 和 mysql。系统一开始是 debian 8，所以需要先升级一下。
首先进入 /etc/ap..." data-title=" QQ"> <i class="icon icon-qq"></i> </a> </li> <li> <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/" data-title=" Facebook"> <i class="icon icon-facebook"></i> </a> </li> <li> <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《将阿里云服务器升级到 debian 9 的全过程记录》 — CoolCode&url=https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/&via=https://coolcode.org" data-title=" Twitter"> <i class="icon icon-twitter"></i> </a> </li> <li> <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/" data-title=" Google+"> <i class="icon icon-google-plus"></i> </a> </li> </ul> </div> <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle"> <i class="icon icon-share-alt icon-lg"></i> </a> </div> </div> </div> <nav class="post-nav flex-row flex-justify-between"> <div class="waves-block waves-effect prev"> <a href="../../../05/05/why-the-serialization-of-hprose-3.0-for-dotnet-is-so-fast/" id="post-prev" class="post-nav-link"> <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div> <h4 class="title">Hprose 3.0 for .NET 的序列化为何这么快</h4> </a> </div> <div class="waves-block waves-effect next"> <a href="../../../03/26/create-a-dotnet-project-for-multiple-target-frameworks/" id="post-next" class="post-nav-link"> <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div> <h4 class="title">创建面向多目标框架的.NET项目</h4> </a> </div> </nav> <section class="comments" id="comments"> <div id="gitment_thread"></div> <script type="text/javascript" src="../../../../js/gitment.browser.min.js?v=1.7.2"></script> <script>var gitment=new Gitmint({lang:"zh-CN",owner:"andot",repo:"CoolCode",id:"将阿里云服务器升级到 debian 9 的全过程记录",oauth:{client_id:"0dfa8bd57a3253425991",client_secret:"cc7af9e85ee4abda607ea1a5d5a0f55e1e6c256a"}});gitment.render("comments")</script> </section> </article> <div id="reward" class="page-modal reward-lay"> <a class="close" href="javascript:;"><i class="icon icon-close"></i></a> <h3 class="reward-title"> <i class="icon icon-quote-left"></i> 感谢您的支持~ <i class="icon icon-quote-right"></i> </h3> <div class="reward-content"> <div class="reward-code"> <img id="rewardCode" src="../../../../img/wechat.jpg" alt="打赏二维码"> </div> <label class="reward-toggle"> <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="../../../../img/wechat.jpg" data-alipay="../../../../img/alipay.jpg"> <div class="reward-toggle-ctrol"> <span class="reward-toggle-item wechat">微信</span> <span class="reward-toggle-label"></span> <span class="reward-toggle-item alipay">支付宝</span> </div> </label> </div> </div> </div> <footer class="footer"> <div class="bottom"> <p> <span id="busuanzi_container_site_uv"> 站点总访客数：<span id="busuanzi_value_site_uv"><i class="icon icon-lg icon-spinner"></i></span> </span> <span id="busuanzi_container_site_pv"> 站点总访问量：<span id="busuanzi_value_site_pv"><i class="icon icon-lg icon-spinner"></i></span> </span> </p> <p> <span><a href="../../../../atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span> <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span> </p> <p> <span>小马哥 &copy; 2005 - 2020</span> <span> <a href="http://www.miitbeian.gov.cn/" target="_blank">鲁ICP备17003119号-8</a> </span><span>Power by <a href="https://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></span> <span>Hosted by <a href="https://pages.github.com" style="font-weight:700">GitHub Pages</a></span> </p> </div> </footer> </main> <div class="mask" id="mask"></div> <a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a> <div class="global-share" id="globalShare"> <ul class="reset share-icons"> <li> <a class="weibo share-sns" target="_blank" href="https://service.weibo.com/share/share.php?url=https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/&title=《将阿里云服务器升级到 debian 9 的全过程记录》 — CoolCode&pic=https://coolcode.org/img/avatar.jpg" data-title="微博"> <i class="icon icon-weibo"></i> </a> </li> <li> <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信"> <i class="icon icon-weixin"></i> </a> </li> <li> <a class="qq share-sns" target="_blank" href="https://connect.qq.com/widget/shareqq/index.html?url=https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/&title=《将阿里云服务器升级到 debian 9 的全过程记录》 — CoolCode&source=今天装了一台阿里云上的服务器，打算安装 nginx、php 和 mysql。系统一开始是 debian 8，所以需要先升级一下。
首先进入 /etc/ap..." data-title=" QQ"> <i class="icon icon-qq"></i> </a> </li> <li> <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/" data-title=" Facebook"> <i class="icon icon-facebook"></i> </a> </li> <li> <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《将阿里云服务器升级到 debian 9 的全过程记录》 — CoolCode&url=https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/&via=https://coolcode.org" data-title=" Twitter"> <i class="icon icon-twitter"></i> </a> </li> <li> <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://coolcode.org/2018/04/03/upgrade-to-debian9-on-aliyun/" data-title=" Google+"> <i class="icon icon-google-plus"></i> </a> </li> </ul> </div> <div class="page-modal wx-share" id="wxShare"> <a class="close" href="javascript:;"><i class="icon icon-close"></i></a> <p>扫一扫，分享到微信</p> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACJ0lEQVR42u3aQY7cMAwEwP3/pyfXAMnY3aL2YLl0MgaGh6UDQYr6+YnX56/17+/J+/nzt29uWBgYGI9lfC7Xt3cSTLIR199PYsPAwHgP49un8xSZvJ9nzjw2DAwMjDb0m7Q4KBwxMDAw5omvKOMuMRgYGBiTJrZtU6/b3bXSc0MvjoGB8UDGpLH87edfmW9gYGA8ivEpVzLOnCfrOioMDIyjGfMBZDvsbI/bingwMDAOZbQXLPIGcu+1sJt/xMDAOJqRk5LkO9+myeEdBgbGqYzE16bgJKC89b3eLAwMjDcwknDbgNotaBP6TbuLgYFxHKMdA6w1onnSXDu8w8DAeANjV6HWXgVbKx+LChcDA+MgRtteJgHljPbQ7WaEiYGBcShjrXXcfONjUO9hYGCczcgb2nYimhyu5QXohssWGBgYj2UUyqW/SQLNL5wVvTgGBsZBjLZdXLt4kY8K2hKz3mkMDIzHMvL0l2Py0rOt96JBJgYGxnGMSeJLisW1oeaG7hwDA+Mgxq5j+jXS5LDvP1MODAyMoxlJmdgOL3PqWjmIgYGBMUmIu65cjHpxDAyMIxifcuVBtMOAdpzwtbbFwMA4jrE24Jy3u/kViqRsxcDAeANj3qzuvTaRb1lRIGJgYBzByENpk+Z8kBkhMTAwMJYutrahXH/nhoqBgYERk5LvtEd40SEgBgbGCxj5YHIXb5K4MTAw3sZoz7IS5CSItU3EwMA4lPEHLzC8KnQjoDIAAAAASUVORK5CYII=" alt="微信分享二维码"> </div> <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script> <script>var BLOG={ROOT:"/",SHARE:!0,REWARD:!0}</script> <script src="../../../../js/main.min.js?v=1.7.2"></script> <div class="search-panel" id="search-panel"> <ul class="search-result" id="search-result"></ul> </div> <template id="search-tpl"> <li class="item"> <a href="{path}" class="waves-block waves-effect"> <div class="title ellipsis" title="{title}">{title}</div> <div class="flex-row flex-middle"> <div class="tags ellipsis"> {tags} </div> <time class="flex-col time">{date}</time> </div> </a> </li> </template> <script src="../../../../js/search.min.js?v=1.7.2" async></script> <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script> </body> </html> 