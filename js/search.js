(function(){var i,s=window||this,e=s.BLOG.even,t=s.BLOG.$,n=t("#search"),a=t("#search-wrap"),r=t("#key"),o=t("#back"),c=t("#search-panel"),l=t("#search-result"),u=t("#search-tpl").innerHTML,f=(s.BLOG.ROOT+"/content.json").replace(/\/{2}/g,"/");s.BLOG.noop;var d=t("html"),p={show:function(){s.innerWidth<760&&d.classList.add("lock-size"),c.classList.add("in")},hide:function(){s.innerWidth<760&&d.classList.remove("lock-size"),c.classList.remove("in")}};function h(t,e){return e.lastIndex=0,e.test(t)}function L(t){var e=this.value.trim();if(e){var n=new RegExp(e.replace(/[ ]/g,"|"),"gmi");!function(e){if(i)e(i);else{var t=new XMLHttpRequest;t.open("GET",f,!0),t.onload=function(){if(200<=this.status&&this.status<300){var t=JSON.parse(this.response);i=t instanceof Array?t:t.posts,e(i)}else console.error(this.statusText)},t.onerror=function(){console.error(this.statusText)},t.send()}}(function(t){!function(t){var e="";e=t.length?t.map(function(t){return function(t,n){return t.replace(/\{\w+\}/g,function(t){var e=t.replace(/\{|\}/g,"");return n[e]||""})}(u,{title:t.title,path:(s.BLOG.ROOT+"/"+t.path).replace(/\/{2,}/g,"/"),date:new Date(t.date).toLocaleDateString(),tags:t.tags.map(function(t){return"<span>#"+t.name+"</span>"}).join("")})}).join(""):'<li class="tips"><i class="icon icon-coffee icon-3x"></i><p>Results not found!</p></li>',l.innerHTML=e}(t.filter(function(t){return function(t,e){return h(t.title,e)||t.tags.some(function(t){return h(t.name,e)})||h(t.text,e)}(t,n)})),p.show()}),t.preventDefault()}}n.addEventListener(e,function(){a.classList.toggle("in"),r.value="",a.classList.contains("in")?r.focus():r.blur()}),o.addEventListener(e,function(){a.classList.remove("in"),p.hide()}),document.addEventListener(e,function(t){"key"!==t.target.id&&"click"===e&&p.hide()}),r.addEventListener("input",L),r.addEventListener(e,L)}).call(this);